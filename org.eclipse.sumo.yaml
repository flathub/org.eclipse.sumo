app-id: org.eclipse.sumo
runtime: org.freedesktop.Platform
sdk: org.freedesktop.Sdk
runtime-version: '24.08'
command: sumo-gui
sdk-extensions:
  - org.freedesktop.Sdk.Extension.openjdk17
finish-args:
  - --share=ipc
  - --share=network  # for the osmWebWizard
  - --socket=x11
  - --device=dri
  - --filesystem=home
  - --env=SUMO_HOME=/app/share/sumo #https://github.com/flathub/org.eclipse.sumo/issues/64
cleanup:
  - /include
  - /lib/cmake
  - /lib/pkgconfig
  - /share/doc
  - /share/man
  - '*.la'
  - '*.a'
modules:
  - shared-modules/glu/glu-9.json

  - name: GDAL
    buildsystem: cmake-ninja
    config-opts:
      - -DACCEPT_MISSING_SQLITE3_RTREE:BOOL=ON
    sources:
      - type: archive
        url: https://download.osgeo.org/gdal/3.12.1/gdal-3.12.1.tar.gz
        sha256: 266cbadf8534d1de831db8834374afd95603e0a6af4f53d0547ae0d46bd3d2d1
        x-checker-data:
          type: anitya
          project-id: 881
          stable-only: true
          url-template: https://download.osgeo.org/gdal/$version/gdal-$version.tar.gz
    modules:
      - name: PROJ
        buildsystem: cmake-ninja
        config-opts:
          - -DBUILD_TESTING:BOOL=OFF
        sources:
          - type: archive
            url: https://github.com/OSGeo/PROJ/releases/download/9.7.1/proj-9.7.1.tar.gz
            sha256: 6c097dc803c561929cdfcc46e4bf9945ea977611fb31493ad14e88edaeae260f
            x-checker-data:
              type: anitya
              project-id: 9463
              stable-only: true
              url-template: https://github.com/OSGeo/PROJ/releases/download/$version/proj-$version.tar.gz

  - name: SWIG
    sources:
      - type: archive
        url: https://sourceforge.net/projects/swig/files/swig/swig-4.4.1/swig-4.4.1.tar.gz
        sha256: 40162a706c56f7592d08fd52ef5511cb7ac191f3593cf07306a0a554c6281fcf
        x-checker-data:
          type: anitya
          project-id: 4919
          stable-only: true
          url-template: https://sourceforge.net/projects/swig/files/swig/swig-$version/swig-$version.tar.gz

  - name: XercesC
    buildsystem: cmake-ninja
    builddir: true
    config-opts:
      - -DCMAKE_BUILD_TYPE=Release
      - -DBUILD_SHARED_LIBS=ON
      - -DCMAKE_POSITION_INDEPENDENT_CODE=ON
      - -Dnetwork-accessor=curl
      - -Dtranscoder=icu
    sources:
      - type: archive
        url: https://dlcdn.apache.org//xerces/c/3/sources/xerces-c-3.3.0.tar.xz
        sha256: a83e12af82dc4fea09c592979fdbb6f206eeaa968562d7d18a0a4dd032c51267
        x-checker-data:
          type: anitya
          project-id: 5182
          url-template: https://dlcdn.apache.org//xerces/c/3/sources/xerces-c-$version.tar.xz
        # From https://bugs.gentoo.org/931105
      - type: patch
        path: xerces1.patch

  - name: gl2ps
    buildsystem: cmake-ninja
    config-opts:
      - -DCMAKE_BUILD_TYPE=RelWithDebInfo
      - -DOpenGL_GL_PREFERENCE=GLVND
    sources:
      - type: archive
        url: https://geuz.org/gl2ps/src/gl2ps-1.4.2.tgz
        sha256: 8d1c00c1018f96b4b97655482e57dcb0ce42ae2f1d349cd6d4191e7848d9ffe9
        x-checker-data:
          type: anitya
          project-id: 1173
          url-template: https://geuz.org/gl2ps/src/gl2ps-$version.tgz

  - name: jupedsim
    buildsystem: cmake-ninja
    config-opts:
      - -DCMAKE_BUILD_TYPE=Release
    sources:
      - type: archive
        url: https://github.com/PedestrianDynamics/jupedsim/archive/refs/tags/v1.3.1.tar.gz
        sha256: 1057cc6385290d08997ad4dcbe2c6f7cdcfc50e8e541777fc03cefb0f9d00f30
        x-checker-data:
          type: anitya
          project-id: 386815
          url-template: https://github.com/PedestrianDynamics/jupedsim/archive/refs/tags/v$version.tar.gz

  - name: geos
    buildsystem: cmake-ninja
    sources:
      - type: archive
        url: http://download.osgeo.org/geos/geos-3.14.1.tar.bz2
        sha256: 3c20919cda9a505db07b5216baa980bacdaa0702da715b43f176fb07eff7e716
        x-checker-data:
          type: anitya
          project-id: 13493
          url-template: http://download.osgeo.org/geos/geos-$version.tar.bz2
          stable-only: true

  - name: arrow
    buildsystem: cmake-ninja
    build-options:
      env:
        ARROW_ABSL_URL: /run/build/arrow/cpp/thirdparty/absl-20211102.0.tar.gz
        ARROW_AWS_C_AUTH_URL: /run/build/arrow/cpp/thirdparty/aws-c-auth-v0.9.0.tar.gz
        ARROW_AWS_C_CAL_URL: /run/build/arrow/cpp/thirdparty/aws-c-cal-v0.9.2.tar.gz
        ARROW_AWS_C_COMMON_URL: /run/build/arrow/cpp/thirdparty/aws-c-common-v0.12.4.tar.gz
        ARROW_AWS_C_COMPRESSION_URL: /run/build/arrow/cpp/thirdparty/aws-c-compression-v0.3.1.tar.gz
        ARROW_AWS_C_EVENT_STREAM_URL: /run/build/arrow/cpp/thirdparty/aws-c-event-stream-v0.5.4.tar.gz
        ARROW_AWS_C_HTTP_URL: /run/build/arrow/cpp/thirdparty/aws-c-http-v0.10.2.tar.gz
        ARROW_AWS_C_IO_URL: /run/build/arrow/cpp/thirdparty/aws-c-io-v0.19.1.tar.gz
        ARROW_AWS_C_MQTT_URL: /run/build/arrow/cpp/thirdparty/aws-c-mqtt-v0.13.1.tar.gz
        ARROW_AWS_C_S3_URL: /run/build/arrow/cpp/thirdparty/aws-c-s3-v0.8.1.tar.gz
        ARROW_AWS_C_SDKUTILS_URL: /run/build/arrow/cpp/thirdparty/aws-c-sdkutils-v0.2.4.tar.gz
        ARROW_AWS_CHECKSUMS_URL: /run/build/arrow/cpp/thirdparty/aws-checksums-v0.2.7.tar.gz
        ARROW_AWS_CRT_CPP_URL: /run/build/arrow/cpp/thirdparty/aws-crt-cpp-v0.32.8.tar.gz
        ARROW_AWS_LC_URL: /run/build/arrow/cpp/thirdparty/aws-lc-v1.52.1.tar.gz
        ARROW_AWSSDK_URL: /run/build/arrow/cpp/thirdparty/aws-sdk-cpp-1.11.587.tar.gz
        ARROW_BOOST_URL: /run/build/arrow/cpp/thirdparty/boost-1.88.0-cmake.tar.gz
        ARROW_BROTLI_URL: /run/build/arrow/cpp/thirdparty/brotli-v1.0.9.tar.gz
        ARROW_BZIP2_URL: /run/build/arrow/cpp/thirdparty/bzip2-1.0.8.tar.gz
        ARROW_CARES_URL: /run/build/arrow/cpp/thirdparty/cares-1.17.2.tar.gz
        ARROW_CRC32C_URL: /run/build/arrow/cpp/thirdparty/crc32c-1.1.2.tar.gz
        ARROW_GBENCHMARK_URL: /run/build/arrow/cpp/thirdparty/gbenchmark-v1.8.3.tar.gz
        ARROW_GFLAGS_URL: /run/build/arrow/cpp/thirdparty/gflags-v2.2.2.tar.gz
        ARROW_GLOG_URL: /run/build/arrow/cpp/thirdparty/glog-v0.5.0.tar.gz
        ARROW_GOOGLE_CLOUD_CPP_URL: /run/build/arrow/cpp/thirdparty/google-cloud-cpp-v2.22.0.tar.gz
        ARROW_GRPC_URL: /run/build/arrow/cpp/thirdparty/grpc-v1.46.3.tar.gz
        ARROW_GTEST_URL: /run/build/arrow/cpp/thirdparty/gtest-1.16.0.tar.gz
        ARROW_JEMALLOC_URL: /run/build/arrow/cpp/thirdparty/jemalloc-5.3.0.tar.bz2
        ARROW_LZ4_URL: /run/build/arrow/cpp/thirdparty/lz4-v1.10.0.tar.gz
        ARROW_MIMALLOC_URL: /run/build/arrow/cpp/thirdparty/mimalloc-v3.1.5.tar.gz
        ARROW_NLOHMANN_JSON_URL: /run/build/arrow/cpp/thirdparty/nlohmann-json-v3.12.0.tar.gz
        ARROW_OPENTELEMETRY_URL: /run/build/arrow/cpp/thirdparty/opentelemetry-cpp-v1.21.0.tar.gz
        ARROW_OPENTELEMETRY_PROTO_URL: /run/build/arrow/cpp/thirdparty/opentelemetry-proto-v1.7.0.tar.gz
        ARROW_ORC_URL: /run/build/arrow/cpp/thirdparty/orc-2.2.0.tar.gz
        ARROW_PROTOBUF_URL: /run/build/arrow/cpp/thirdparty/protobuf-v21.3.tar.gz
        ARROW_RAPIDJSON_URL: /run/build/arrow/cpp/thirdparty/rapidjson-232389d4f1012dddec4ef84861face2d2ba85709.tar.gz
        ARROW_RE2_URL: /run/build/arrow/cpp/thirdparty/re2-2022-06-01.tar.gz
        ARROW_S2N_TLS_URL: /run/build/arrow/cpp/thirdparty/s2n-v1.5.23.tar.gz
        ARROW_SNAPPY_URL: /run/build/arrow/cpp/thirdparty/snappy-1.2.2.tar.gz
        ARROW_SUBSTRAIT_URL: /run/build/arrow/cpp/thirdparty/substrait-v0.44.0.tar.gz
        ARROW_THRIFT_URL: /run/build/arrow/cpp/thirdparty/thrift-0.22.0.tar.gz
        ARROW_UTF8PROC_URL: /run/build/arrow/cpp/thirdparty/utf8proc-v2.10.0.tar.gz
        ARROW_XSIMD_URL: /run/build/arrow/cpp/thirdparty/xsimd-13.0.0.tar.gz
        ARROW_ZLIB_URL: /run/build/arrow/cpp/thirdparty/zlib-1.3.1.tar.gz
        ARROW_ZSTD_URL: /run/build/arrow/cpp/thirdparty/zstd-1.5.7.tar.gz
    subdir: cpp
    config-opts:
      - -DARROW_PARQUET=ON
    sources:
      - type: archive
        url: https://github.com/apache/arrow/archive/refs/tags/apache-arrow-22.0.0.tar.gz
        sha256: 8a95e6c7b9bec2bc0058feb73efe38ad6cfd49a0c7094db29b37ecaa8ab16051
        x-checker-data:
          type: anitya
          project-id: 20697
          url-template: https://github.com/apache/arrow/archive/refs/tags/apache-arrow-$version.tar.gz
          stable-only: true
      - type: file
        url: https://github.com/abseil/abseil-cpp/archive/20211102.0.tar.gz
        sha256: dcf71b9cba8dc0ca9940c4b316a0c796be8fab42b070bb6b7cab62b48f0e66c4
        dest: cpp/thirdparty
        dest-filename: absl-20211102.0.tar.gz
      - type: file
        url: https://github.com/awslabs/aws-c-auth/archive/v0.9.0.tar.gz
        sha256: aa6e98864fefb95c249c100da4ae7aed36ba13a8a91415791ec6fad20bec0427
        dest: cpp/thirdparty
        dest-filename: aws-c-auth-v0.9.0.tar.gz
      - type: file
        url: https://github.com/awslabs/aws-c-cal/archive/v0.9.2.tar.gz
        sha256: f9f3bc6a069e2efe25fcdf73e4d2b16b5608c327d2eb57c8f7a8524e9e1fcad0
        dest: cpp/thirdparty
        dest-filename: aws-c-cal-v0.9.2.tar.gz
      - type: file
        url: https://github.com/awslabs/aws-c-common/archive/v0.12.4.tar.gz
        sha256: 0b7705a4d115663c3f485d353a75ed86e37583157585e5825d851af634b57fe3
        dest: cpp/thirdparty
        dest-filename: aws-c-common-v0.12.4.tar.gz
      - type: file
        url: https://github.com/awslabs/aws-c-compression/archive/v0.3.1.tar.gz
        sha256: d89fca17a37de762dc34f332d2da402343078da8dbd2224c46a11a88adddf754
        dest: cpp/thirdparty
        dest-filename: aws-c-compression-v0.3.1.tar.gz
      - type: file
        url: https://github.com/awslabs/aws-c-event-stream/archive/v0.5.4.tar.gz
        sha256: cef8b78e362836d15514110fb43a0a0c7a86b0a210d5fe25fd248a82027a7272
        dest: cpp/thirdparty
        dest-filename: aws-c-event-stream-v0.5.4.tar.gz
      - type: file
        url: https://github.com/awslabs/aws-c-http/archive/v0.10.2.tar.gz
        sha256: 048d9d683459ade363fd7cc448c2b6329c78f67a2a0c0cb61c16de4634a2fc6b
        dest: cpp/thirdparty
        dest-filename: aws-c-http-v0.10.2.tar.gz
      - type: file
        url: https://github.com/awslabs/aws-c-io/archive/v0.19.1.tar.gz
        sha256: f2fea0c066924f7fe3c2b1c7b2fa9be640f5b16a6514854226330e63a1faacd0
        dest: cpp/thirdparty
        dest-filename: aws-c-io-v0.19.1.tar.gz
      - type: file
        url: https://github.com/awslabs/aws-c-mqtt/archive/v0.13.1.tar.gz
        sha256: c54d02c1e46f55bae8d5e6f9c4b0d78d84c1c9d9ac16ba8d78c3361edcd8b5bb
        dest: cpp/thirdparty
        dest-filename: aws-c-mqtt-v0.13.1.tar.gz
      - type: file
        url: https://github.com/awslabs/aws-c-s3/archive/v0.8.1.tar.gz
        sha256: c8b09780691d2b94e50d101c68f01fa2d1c3debb0ff3aed313d93f0d3c9af663
        dest: cpp/thirdparty
        dest-filename: aws-c-s3-v0.8.1.tar.gz
      - type: file
        url: https://github.com/awslabs/aws-c-sdkutils/archive/v0.2.4.tar.gz
        sha256: 493cbed4fa57e0d4622fcff044e11305eb4fc12445f32c8861025597939175fc
        dest: cpp/thirdparty
        dest-filename: aws-c-sdkutils-v0.2.4.tar.gz
      - type: file
        url: https://github.com/awslabs/aws-checksums/archive/v0.2.7.tar.gz
        sha256: 178e8398d98111f29150f7813a70c20ad97ab30be0de02525440355fe84ccb1d
        dest: cpp/thirdparty
        dest-filename: aws-checksums-v0.2.7.tar.gz
      - type: file
        url: https://github.com/awslabs/aws-crt-cpp/archive/v0.32.8.tar.gz
        sha256: db44260452a0296341fb8e7b987e4c328f08f7829b9f1c740fed9c963e081e93
        dest: cpp/thirdparty
        dest-filename: aws-crt-cpp-v0.32.8.tar.gz
      - type: file
        url: https://github.com/awslabs/aws-lc/archive/v1.52.1.tar.gz
        sha256: fe552e3c3522f73afc3c30011745c431c633f7b4e25dcd7b38325f194a7b3b75
        dest: cpp/thirdparty
        dest-filename: aws-lc-v1.52.1.tar.gz
      - type: file
        url: https://github.com/aws/aws-sdk-cpp/archive/1.11.587.tar.gz
        sha256: b9944ba9905a68d6e53abb4f36ab2b3bd18ac88d8571647bb9f2b8026b76f8cd
        dest: cpp/thirdparty
        dest-filename: aws-sdk-cpp-1.11.587.tar.gz
      - type: file
        url: https://github.com/boostorg/boost/releases/download/boost-1.88.0/boost-1.88.0-cmake.tar.gz
        sha256: dcea50f40ba1ecfc448fdf886c0165cf3e525fef2c9e3e080b9804e8117b9694
        dest: cpp/thirdparty
        dest-filename: boost-1.88.0-cmake.tar.gz
      - type: file
        url: https://github.com/google/brotli/archive/v1.0.9.tar.gz
        sha256: f9e8d81d0405ba66d181529af42a3354f838c939095ff99930da6aa9cdf6fe46
        dest: cpp/thirdparty
        dest-filename: brotli-v1.0.9.tar.gz
      - type: file
        url: https://sourceware.org/pub/bzip2/bzip2-1.0.8.tar.gz
        sha256: ab5a03176ee106d3f0fa90e381da478ddae405918153cca248e682cd0c4a2269
        dest: cpp/thirdparty
        dest-filename: bzip2-1.0.8.tar.gz
      - type: file
        url: https://github.com/c-ares/c-ares/releases/download/cares-1_17_2/c-ares-1.17.2.tar.gz
        sha256: 4803c844ce20ce510ef0eb83f8ea41fa24ecaae9d280c468c582d2bb25b3913d
        dest: cpp/thirdparty
        dest-filename: cares-1.17.2.tar.gz
      - type: file
        url: https://github.com/google/crc32c/archive/refs/tags/1.1.2.tar.gz
        sha256: ac07840513072b7fcebda6e821068aa04889018f24e10e46181068fb214d7e56
        dest: cpp/thirdparty
        dest-filename: crc32c-1.1.2.tar.gz
      - type: file
        url: https://github.com/google/benchmark/archive/v1.8.3.tar.gz
        sha256: 6bc180a57d23d4d9515519f92b0c83d61b05b5bab188961f36ac7b06b0d9e9ce
        dest: cpp/thirdparty
        dest-filename: gbenchmark-v1.8.3.tar.gz
      - type: file
        url: https://github.com/gflags/gflags/archive/v2.2.2.tar.gz
        sha256: 34af2f15cf7367513b352bdcd2493ab14ce43692d2dcd9dfc499492966c64dcf
        dest: cpp/thirdparty
        dest-filename: gflags-v2.2.2.tar.gz
      - type: file
        url: https://github.com/google/glog/archive/v0.5.0.tar.gz
        sha256: eede71f28371bf39aa69b45de23b329d37214016e2055269b3b5e7cfd40b59f5
        dest: cpp/thirdparty
        dest-filename: glog-v0.5.0.tar.gz
      - type: file
        url: https://github.com/googleapis/google-cloud-cpp/archive/v2.22.0.tar.gz
        sha256: 0c68782e57959c82e0c81def805c01460a042c1aae0c2feee905acaa2a2dc9bf
        dest: cpp/thirdparty
        dest-filename: google-cloud-cpp-v2.22.0.tar.gz
      - type: file
        url: https://github.com/grpc/grpc/archive/v1.46.3.tar.gz
        sha256: d6cbf22cb5007af71b61c6be316a79397469c58c82a942552a62e708bce60964
        dest: cpp/thirdparty
        dest-filename: grpc-v1.46.3.tar.gz
      - type: file
        url: https://github.com/google/googletest/releases/download/v1.16.0/googletest-1.16.0.tar.gz
        sha256: 78c676fc63881529bf97bf9d45948d905a66833fbfa5318ea2cd7478cb98f399
        dest: cpp/thirdparty
        dest-filename: gtest-1.16.0.tar.gz
      - type: file
        url: https://github.com/jemalloc/jemalloc/releases/download/5.3.0/jemalloc-5.3.0.tar.bz2
        sha256: 2db82d1e7119df3e71b7640219b6dfe84789bc0537983c3b7ac4f7189aecfeaa
        dest: cpp/thirdparty
        dest-filename: jemalloc-5.3.0.tar.bz2
      - type: file
        url: https://github.com/lz4/lz4/archive/v1.10.0.tar.gz
        sha256: 537512904744b35e232912055ccf8ec66d768639ff3abe5788d90d792ec5f48b
        dest: cpp/thirdparty
        dest-filename: lz4-v1.10.0.tar.gz
      - type: file
        url: https://github.com/microsoft/mimalloc/archive/v3.1.5.tar.gz
        sha256: 1c6949032069d5ebea438ec5cedd602d06f40a92ddf0f0d9dcff0993e5f6635c
        dest: cpp/thirdparty
        dest-filename: mimalloc-v3.1.5.tar.gz
      - type: file
        url: https://github.com/nlohmann/json/archive/refs/tags/v3.12.0.tar.gz
        sha256: 4b92eb0c06d10683f7447ce9406cb97cd4b453be18d7279320f7b2f025c10187
        dest: cpp/thirdparty
        dest-filename: nlohmann-json-v3.12.0.tar.gz
      - type: file
        url: https://github.com/open-telemetry/opentelemetry-cpp/archive/refs/tags/v1.21.0.tar.gz
        sha256: 98e5546f577a11b52a57faed1f4cc60d8c1daa44760eba393f43eab5a8ec46a2
        dest: cpp/thirdparty
        dest-filename: opentelemetry-cpp-v1.21.0.tar.gz
      - type: file
        url: https://github.com/open-telemetry/opentelemetry-proto/archive/refs/tags/v1.7.0.tar.gz
        sha256: 11330d850f5e24d34c4246bc8cb21fcd311e7565d219195713455a576bb11bed
        dest: cpp/thirdparty
        dest-filename: opentelemetry-proto-v1.7.0.tar.gz
      - type: file
        url: https://www.apache.org/dyn/closer.lua/orc/orc-2.2.0/orc-2.2.0.tar.gz?action=download
        sha256: b15aca45a7e73ffbd1bbc36a78cd1422d41f07721092a25f43448e6e16f4763b
        dest: cpp/thirdparty
        dest-filename: orc-2.2.0.tar.gz
      - type: file
        url: https://github.com/google/protobuf/releases/download/v21.3/protobuf-all-21.3.tar.gz
        sha256: 2f723218f6cb709ae4cdc4fb5ed56a5951fc5d466f0128ce4c946b8c78c8c49f
        dest: cpp/thirdparty
        dest-filename: protobuf-v21.3.tar.gz
      - type: file
        url: https://github.com/miloyip/rapidjson/archive/232389d4f1012dddec4ef84861face2d2ba85709.tar.gz
        sha256: b9290a9a6d444c8e049bd589ab804e0ccf2b05dc5984a19ed5ae75d090064806
        dest: cpp/thirdparty
        dest-filename: rapidjson-232389d4f1012dddec4ef84861face2d2ba85709.tar.gz
      - type: file
        url: https://github.com/google/re2/archive/2022-06-01.tar.gz
        sha256: f89c61410a072e5cbcf8c27e3a778da7d6fd2f2b5b1445cd4f4508bee946ab0f
        dest: cpp/thirdparty
        dest-filename: re2-2022-06-01.tar.gz
      - type: file
        url: https://github.com/aws/s2n-tls/archive/v1.5.23.tar.gz
        sha256: 81961ea5ae9313c987edfa579306ad4500bedfbf10caf84d8a5dcfc42aaf591f
        dest: cpp/thirdparty
        dest-filename: s2n-v1.5.23.tar.gz
      - type: file
        url: https://github.com/google/snappy/archive/1.2.2.tar.gz
        sha256: 90f74bc1fbf78a6c56b3c4a082a05103b3a56bb17bca1a27e052ea11723292dc
        dest: cpp/thirdparty
        dest-filename: snappy-1.2.2.tar.gz
      - type: file
        url: https://github.com/substrait-io/substrait/archive/v0.44.0.tar.gz
        sha256: f989a862f694e7dbb695925ddb7c4ce06aa6c51aca945105c075139aed7e55a2
        dest: cpp/thirdparty
        dest-filename: substrait-v0.44.0.tar.gz
      - type: file
        url: https://www.apache.org/dyn/closer.lua/thrift/0.22.0/thrift-0.22.0.tar.gz?action=download
        sha256: 794a0e455787960d9f27ab92c38e34da27e8deeda7a5db0e59dc64a00df8a1e5
        dest: cpp/thirdparty
        dest-filename: thrift-0.22.0.tar.gz
      - type: file
        url: https://github.com/JuliaStrings/utf8proc/archive/v2.10.0.tar.gz
        sha256: 6f4f1b639daa6dca9f80bc5db1233e9cbaa31a67790887106160b33ef743f136
        dest: cpp/thirdparty
        dest-filename: utf8proc-v2.10.0.tar.gz
      - type: file
        url: https://github.com/xtensor-stack/xsimd/archive/13.0.0.tar.gz
        sha256: 8bdbbad0c3e7afa38d88d0d484d70a1671a1d8aefff03f4223ab2eb6a41110a3
        dest: cpp/thirdparty
        dest-filename: xsimd-13.0.0.tar.gz
      - type: file
        url: https://zlib.net/fossils/zlib-1.3.1.tar.gz
        sha256: 9a93b2b7dfdac77ceba5a558a580e74667dd6fede4585b91eefb60f03b72df23
        dest: cpp/thirdparty
        dest-filename: zlib-1.3.1.tar.gz
      - type: file
        url: https://github.com/facebook/zstd/releases/download/v1.5.7/zstd-1.5.7.tar.gz
        sha256: eb33e51f49a15e023950cd7825ca74a4a2b43db8354825ac24fc1b7ee09e6fa3
        dest: cpp/thirdparty
        dest-filename: zstd-1.5.7.tar.gz

  - name: fox
    buildsystem: autotools
    config-opts:
      - --disable-static
      - --enable-threadsafe
      - --enable-release
      - --enable-cups
      - --with-xft
      - --with-x
      - --with-xcursor
      - --with-xrender
      - --with-xrandr
      - --with-opengl
      - --with-shape
      - --with-xshm
    sources:
      - type: archive
        url: http://fox-toolkit.org/ftp/fox-1.6.57.zip
        sha256: 86ce8967094f03924e6801482dbe1de3a8de2edc41094fea8313c8524bc088a0
        x-checker-data:
          type: anitya
          project-id: 11427
          url-template: http://fox-toolkit.org/ftp/fox-$version.zip

  - name: Eigen3
    buildsystem: cmake-ninja
    builddir: true
    sources:
      - type: archive
        url: https://gitlab.com/libeigen/eigen/-/archive/5.0.1/eigen-5.0.1.tar.bz2
        sha256: e4de6b08f33fd8b8985d2f204381408c660bffa6170ac65b68ae1bd3cd575c0a
        x-checker-data:
          type: anitya
          project-id: 13751
          stable-only: true
          url-template: https://gitlab.com/libeigen/eigen/-/archive/$version/eigen-$version.tar.bz2
    cleanup:
      - '*'

    #From org.flightgear.FlightGear.yaml
    #openscenegraph still relie on older version of ffmpeg
  - name: ffmpeg
    config-opts:
      - --enable-shared
      - --disable-static
      - --disable-doc
      - --disable-manpages
      - --disable-stripping
      - --disable-ffplay
      - --disable-ffprobe

      - --enable-gpl
      - --enable-version3
      - --enable-optimizations
      - --enable-postproc
      - --enable-pthreads
      - --enable-gnutls
      - --enable-libxcb-xfixes
      - --enable-opengl
      - --enable-vaapi
      - --enable-vdpau
      - --enable-zlib
      - --enable-bzlib
      - --enable-lzma

      - --enable-fontconfig
      - --enable-libfontconfig
      - --enable-libfreetype

      # copied from another manifest
      - --enable-avcodec
      - --enable-avfilter
      - --enable-avresample
      - --enable-libxml2
      - --enable-swscale

      - --enable-libxcb

      - --enable-protocol=file
    sources:
      - type: archive
        url: https://ffmpeg.org/releases/ffmpeg-4.3.6.tar.xz
        sha256: f4b173d4d5f539a3699ef13d12a92dd4778ba55c26be1f3dd8f901b98987cc62
      - type: patch
        path: ffmpeg-as-fix.patch
    cleanup:
      - /share/ffmpeg/examples

  - name: openscenegraph
    buildsystem: cmake-ninja
    sources:
      - type: archive
        url: https://github.com/openscenegraph/OpenSceneGraph/archive/OpenSceneGraph-3.6.5.tar.gz
        sha256: aea196550f02974d6d09291c5d83b51ca6a03b3767e234a8c0e21322927d1e12
        x-checker-data:
          type: anitya
          project-id: 6848
          stable-only: true
          url-template: https://github.com/openscenegraph/OpenSceneGraph/archive/OpenSceneGraph-$version.tar.gz

  - name: openjdk
    buildsystem: simple
    build-commands:
      - /usr/lib/sdk/openjdk17/install.sh
      - /usr/lib/sdk/openjdk17/installjdk.sh

  - name: SUMO
    buildsystem: cmake-ninja
    build-options:
      env:
        LIBRARY_PATH: /app/lib:/usr/lib
        LD_LIBRARY_PATH: /app/lib:/usr/lib
        PATH: /app/bin:/usr/bin:/usr/lib/sdk/openjdk17/bin
        JAVA_HOME: /usr/lib/sdk/openjdk17/jvm/openjdk-17
    config-opts:
      - -DCMAKE_BUILD_TYPE=RelWithDebInfo
      - -DSUMO_UTILS:BOOL=true
      - -DJava_JAVA_EXECUTABLE=/app/jre/bin
      - -DJava_JAR_EXECUTABLE=/app/jdk/bin
      - -DJava_JAVAC_EXECUTABLE=/app/jdk/bin
      - -DJava_JAVADOC_EXECUTABLE=/app/jdk/bin
      - -DJava_JAVAH_EXECUTABLE=/app/jdk/bin
      - -DJAVA_JVM_LIBRARY=/app/jre/lib
      - -DJAVA_INCLUDE_PATH=/app/jdk/include
      - -DJAVA_INCLUDE_PATH2=/app/jdk/include/linux
      - -DJAVA_AWT_INCLUDE_PATH=/app/jdk/include
      - -DMVN_EXECUTABLE=
    post-install:
      - ln -s ../share/sumo/tools/osmWebWizard.py ${FLATPAK_DEST}/bin/osmWebWizard.py
      - install -Dm0644 -t ${FLATPAK_DEST}/share/icons/hicolor/256x256/apps/ build_config/package/*.png
      - install -Dm0644 -t ${FLATPAK_DEST}/share/applications/               build_config/package/*.desktop
      - install -Dm0644 -t ${FLATPAK_DEST}/share/mime/application/           build_config/package/${FLATPAK_ID}.xml
      - install -Dm0644 -t ${FLATPAK_DEST}/share/metainfo/                   build_config/package/${FLATPAK_ID}.metainfo.xml
    sources:
      - type: archive
        url: https://github.com/eclipse/sumo/archive/refs/tags/v1_25_0.tar.gz
        sha256: 7944f574288db2ec46648fa4b49fbff2023263b4562f6068e38e9b25b2059f9e
        x-checker-data:
          type: anitya
          project-id: 241872
          stable-only: true
          url-template: https://github.com/eclipse/sumo/archive/refs/tags/v$version.tar.gz
      - type: patch
        path: captions.patch
      - type: patch
        path: cmake_setup_py.patch
